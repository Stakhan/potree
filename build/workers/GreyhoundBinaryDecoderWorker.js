Potree.workers.greyhoundBinaryDecoder = new Potree.WorkerManager(atob("DQovLyBodHRwOi8vanNwZXJmLmNvbS91aW50OGFycmF5LXZzLWRhdGF2aWV3My8zDQpmdW5jdGlvbiBDdXN0b21WaWV3KGJ1ZmZlcikgew0KCXRoaXMuYnVmZmVyID0gYnVmZmVyOw0KCXRoaXMudTggPSBuZXcgVWludDhBcnJheShidWZmZXIpOw0KDQoJdmFyIHRtcCA9IG5ldyBBcnJheUJ1ZmZlcig0KTsNCgl2YXIgdG1wZiA9IG5ldyBGbG9hdDMyQXJyYXkodG1wKTsNCgl2YXIgdG1wdTggPSBuZXcgVWludDhBcnJheSh0bXApOw0KDQoJdGhpcy5nZXRVaW50MzIgPSBmdW5jdGlvbiAoaSkgew0KCQlyZXR1cm4gKHRoaXMudThbaSszXSA8PCAyNCkgfCAodGhpcy51OFtpKzJdIDw8IDE2KSB8ICh0aGlzLnU4W2krMV0gPDwgOCkgfCB0aGlzLnU4W2ldOw0KCX07DQoNCgl0aGlzLmdldFVpbnQxNiA9IGZ1bmN0aW9uIChpKSB7DQoJCXJldHVybiAodGhpcy51OFtpKzFdIDw8IDgpIHwgdGhpcy51OFtpXTsNCgl9Ow0KDQoJdGhpcy5nZXRGbG9hdCA9IGZ1bmN0aW9uKGkpew0KCQl0bXB1OFswXSA9IHRoaXMudThbaSswXTsNCgkJdG1wdThbMV0gPSB0aGlzLnU4W2krMV07DQoJCXRtcHU4WzJdID0gdGhpcy51OFtpKzJdOw0KCQl0bXB1OFszXSA9IHRoaXMudThbaSszXTsNCg0KCQlyZXR1cm4gdG1wZlswXTsNCgl9Ow0KDQoJdGhpcy5nZXRVaW50OCA9IGZ1bmN0aW9uKGkpew0KCQlyZXR1cm4gdGhpcy51OFtpXTsNCgl9Ow0KfQ0KDQpQb3RyZWUgPSB7fTsNCg0KDQpvbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCl7DQoJdmFyIE5VTV9QT0lOVFNfQllURV9TSVpFID0gNDsNCg0KCXZhciBidWZmZXIgPSBldmVudC5kYXRhLmJ1ZmZlcjsNCgl2YXIgcG9pbnRBdHRyaWJ1dGVzID0gZXZlbnQuZGF0YS5wb2ludEF0dHJpYnV0ZXM7DQoJdmFyIG51bVBvaW50cyA9IChidWZmZXIuYnl0ZUxlbmd0aCAtIE5VTV9QT0lOVFNfQllURV9TSVpFKSAvIHBvaW50QXR0cmlidXRlcy5ieXRlU2l6ZTsNCgl2YXIgY3YgPSBuZXcgQ3VzdG9tVmlldyhidWZmZXIpOw0KCXZhciB2ZXJzaW9uID0gbmV3IFBvdHJlZS5WZXJzaW9uKGV2ZW50LmRhdGEudmVyc2lvbik7DQoJdmFyIG1pbiA9IGV2ZW50LmRhdGEubWluOw0KCXZhciBtYXggPSBldmVudC5kYXRhLm1heDsNCgl2YXIgbm9kZU9mZnNldCA9IGV2ZW50LmRhdGEub2Zmc2V0Ow0KCXZhciBiYk9mZnNldCA9IGV2ZW50LmRhdGEuYmJPZmZzZXQ7DQoJdmFyIHNjYWxlID0gZXZlbnQuZGF0YS5zY2FsZTsNCgl2YXIgdGlnaHRCb3hNaW4gPSBbIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldOw0KCXZhciB0aWdodEJveE1heCA9IFsgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZICwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZICwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF07DQoNCgl2YXIgZXh0ZW50ID0geyd4JzogbWF4WzBdIC0gbWluWzBdLCAneSc6IG1heFsxXSAtIG1pblsxXSwgJ3onOiBtYXhbMl0gLSBtaW5bMl19Ow0KDQoJdmFyIGF0dHJpYnV0ZUJ1ZmZlcnMgPSB7fTsNCg0KCXZhciBvZmZzZXQgPSAwOw0KDQoJZm9yKHZhciBpID0gMDsgaSA8IHBvaW50QXR0cmlidXRlcy5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKXsNCgkJdmFyIHBvaW50QXR0cmlidXRlID0gcG9pbnRBdHRyaWJ1dGVzLmF0dHJpYnV0ZXNbaV07DQoNCgkJaWYocG9pbnRBdHRyaWJ1dGUubmFtZSA9PT0gUG90cmVlLlBvaW50QXR0cmlidXRlLlBPU0lUSU9OX0NBUlRFU0lBTi5uYW1lKXsNCg0KCQkJdmFyIGJ1ZmYgPSBuZXcgQXJyYXlCdWZmZXIobnVtUG9pbnRzKjQqMyk7DQoJCQl2YXIgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShidWZmKTsNCg0KCQkJZm9yICh2YXIgaiA9IDA7IGogPCBudW1Qb2ludHM7IGorKykgew0KCQkJCXBvc2l0aW9uc1szKmorMF0gPSAoY3YuZ2V0VWludDMyKG9mZnNldCArIGoqcG9pbnRBdHRyaWJ1dGVzLmJ5dGVTaXplKzApIC0gbm9kZU9mZnNldFswXSk7DQoJCQkJcG9zaXRpb25zWzMqaisxXSA9IChjdi5nZXRVaW50MzIob2Zmc2V0ICsgaipwb2ludEF0dHJpYnV0ZXMuYnl0ZVNpemUrNCkgLSBub2RlT2Zmc2V0WzFdKTsNCgkJCQlwb3NpdGlvbnNbMypqKzJdID0gKGN2LmdldFVpbnQzMihvZmZzZXQgKyBqKnBvaW50QXR0cmlidXRlcy5ieXRlU2l6ZSs4KSAtIG5vZGVPZmZzZXRbMl0pOw0KDQoJCQkJdGlnaHRCb3hNaW5bMF0gPSBNYXRoLm1pbih0aWdodEJveE1pblswXSwgcG9zaXRpb25zWzMqaiswXSk7DQoJCQkJdGlnaHRCb3hNaW5bMV0gPSBNYXRoLm1pbih0aWdodEJveE1pblsxXSwgcG9zaXRpb25zWzMqaisxXSk7DQoJCQkJdGlnaHRCb3hNaW5bMl0gPSBNYXRoLm1pbih0aWdodEJveE1pblsyXSwgcG9zaXRpb25zWzMqaisyXSk7DQoNCgkJCQl0aWdodEJveE1heFswXSA9IE1hdGgubWF4KHRpZ2h0Qm94TWF4WzBdLCBwb3NpdGlvbnNbMypqKzBdKTsNCgkJCQl0aWdodEJveE1heFsxXSA9IE1hdGgubWF4KHRpZ2h0Qm94TWF4WzFdLCBwb3NpdGlvbnNbMypqKzFdKTsNCgkJCQl0aWdodEJveE1heFsyXSA9IE1hdGgubWF4KHRpZ2h0Qm94TWF4WzJdLCBwb3NpdGlvbnNbMypqKzJdKTsNCgkJCX0NCg0KCQkJYXR0cmlidXRlQnVmZmVyc1twb2ludEF0dHJpYnV0ZS5uYW1lXSA9IHsgYnVmZmVyOiBidWZmLCBhdHRyaWJ1dGU6IHBvaW50QXR0cmlidXRlfTsNCg0KCQl9ZWxzZSBpZihwb2ludEF0dHJpYnV0ZS5uYW1lID09PSBQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuQ09MT1JfUEFDS0VELm5hbWUpew0KDQoJCQl2YXIgYnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihudW1Qb2ludHMqNCozKTsNCgkJCXZhciBjb2xvcnMgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmYpOw0KDQoJCQlmb3IodmFyIGogPSAwOyBqIDwgbnVtUG9pbnRzOyBqKyspew0KCQkJCWNvbG9yc1szKmorMF0gPSBjdi5nZXRVaW50MTYob2Zmc2V0ICsgaipwb2ludEF0dHJpYnV0ZXMuYnl0ZVNpemUgKyAwKSAvIDI1NTsNCgkJCQljb2xvcnNbMypqKzFdID0gY3YuZ2V0VWludDE2KG9mZnNldCArIGoqcG9pbnRBdHRyaWJ1dGVzLmJ5dGVTaXplICsgMikgLyAyNTU7DQoJCQkJY29sb3JzWzMqaisyXSA9IGN2LmdldFVpbnQxNihvZmZzZXQgKyBqKnBvaW50QXR0cmlidXRlcy5ieXRlU2l6ZSArIDQpIC8gMjU1Ow0KCQkJfQ0KDQoJCQlhdHRyaWJ1dGVCdWZmZXJzW3BvaW50QXR0cmlidXRlLm5hbWVdID0geyBidWZmZXI6IGJ1ZmYsIGF0dHJpYnV0ZTogcG9pbnRBdHRyaWJ1dGV9Ow0KDQoJCX1lbHNlIGlmKHBvaW50QXR0cmlidXRlLm5hbWUgPT09IFBvdHJlZS5Qb2ludEF0dHJpYnV0ZS5JTlRFTlNJVFkubmFtZSl7DQoNCgkJCXZhciBidWZmID0gbmV3IEFycmF5QnVmZmVyKG51bVBvaW50cyo0KTsNCgkJCXZhciBpbnRlbnNpdGllcyA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZik7DQoNCgkJCWZvcih2YXIgaiA9IDA7IGogPCBudW1Qb2ludHM7IGorKyl7DQoJCQkJdmFyIGludGVuc2l0eSA9IGN2LmdldFVpbnQxNihvZmZzZXQgKyBqKnBvaW50QXR0cmlidXRlcy5ieXRlU2l6ZSk7DQoJCQkJaW50ZW5zaXRpZXNbal0gPSBpbnRlbnNpdHk7DQoJCQl9DQoNCgkJCWF0dHJpYnV0ZUJ1ZmZlcnNbcG9pbnRBdHRyaWJ1dGUubmFtZV0gPSB7IGJ1ZmZlcjogYnVmZiwgYXR0cmlidXRlOiBwb2ludEF0dHJpYnV0ZX07DQoNCgkJfWVsc2UgaWYocG9pbnRBdHRyaWJ1dGUubmFtZSA9PT0gUG90cmVlLlBvaW50QXR0cmlidXRlLkNMQVNTSUZJQ0FUSU9OLm5hbWUpew0KDQoJCQl2YXIgYnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihudW1Qb2ludHMqNCk7DQoJCQl2YXIgY2xhc3NpZmljYXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShidWZmKTsNCg0KCQkJZm9yKHZhciBqID0gMDsgaiA8IG51bVBvaW50czsgaisrKXsNCgkJCQl2YXIgY2xhc3NpZmljYXRpb24gPSBjdi5nZXRVaW50OChvZmZzZXQgKyBqKnBvaW50QXR0cmlidXRlcy5ieXRlU2l6ZSk7DQoJCQkJY2xhc3NpZmljYXRpb25zW2pdID0gY2xhc3NpZmljYXRpb247DQoJCQl9DQoNCgkJCWF0dHJpYnV0ZUJ1ZmZlcnNbcG9pbnRBdHRyaWJ1dGUubmFtZV0gPSB7IGJ1ZmZlcjogYnVmZiwgYXR0cmlidXRlOiBwb2ludEF0dHJpYnV0ZX07DQoNCgkJfWVsc2UgaWYocG9pbnRBdHRyaWJ1dGUubmFtZSA9PT0gUG90cmVlLlBvaW50QXR0cmlidXRlLk5PUk1BTF9TUEhFUkVNQVBQRUQubmFtZSl7DQoNCgkJCXZhciBidWZmID0gbmV3IEFycmF5QnVmZmVyKG51bVBvaW50cyo0KjMpOw0KCQkJdmFyIG5vcm1hbHMgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmYpOw0KDQoJCQlmb3IodmFyIGogPSAwOyBqIDwgbnVtUG9pbnRzOyBqKyspew0KCQkJCXZhciBieCA9IGN2LmdldFVpbnQ4KG9mZnNldCArIGogKiBwb2ludEF0dHJpYnV0ZXMuYnl0ZVNpemUgKyAwKTsNCgkJCQl2YXIgYnkgPSBjdi5nZXRVaW50OChvZmZzZXQgKyBqICogcG9pbnRBdHRyaWJ1dGVzLmJ5dGVTaXplICsgMSk7DQoNCgkJCQl2YXIgZXggPSBieCAvIDI1NTsNCgkJCQl2YXIgZXkgPSBieSAvIDI1NTsNCg0KCQkJCXZhciBueCA9IGV4ICogMiAtIDE7DQoJCQkJdmFyIG55ID0gZXkgKiAyIC0gMTsNCgkJCQl2YXIgbnogPSAxOw0KCQkJCXZhciBudyA9IC0xOw0KDQoJCQkJdmFyIGwgPSAobnggKiAoLW54KSkgKyAobnkgKiAoLW55KSkgKyAobnogKiAoLW53KSk7DQoJCQkJbnogPSBsOw0KCQkJCW54ID0gbnggKiBNYXRoLnNxcnQobCk7DQoJCQkJbnkgPSBueSAqIE1hdGguc3FydChsKTsNCg0KCQkJCW54ID0gbnggKiAyOw0KCQkJCW55ID0gbnkgKiAyOw0KCQkJCW56ID0gbnogKiAyIC0gMTsNCg0KCQkJCW5vcm1hbHNbMypqICsgMF0gPSBueDsNCgkJCQlub3JtYWxzWzMqaiArIDFdID0gbnk7DQoJCQkJbm9ybWFsc1szKmogKyAyXSA9IG56Ow0KCQkJfQ0KDQoJCQlhdHRyaWJ1dGVCdWZmZXJzW3BvaW50QXR0cmlidXRlLm5hbWVdID0geyBidWZmZXI6IGJ1ZmYsIGF0dHJpYnV0ZTogcG9pbnRBdHRyaWJ1dGV9Ow0KCQl9ZWxzZSBpZihwb2ludEF0dHJpYnV0ZS5uYW1lID09PSBQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuTk9STUFMX09DVDE2Lm5hbWUpew0KDQoJCQl2YXIgYnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihudW1Qb2ludHMqNCozKTsNCgkJCXZhciBub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShidWZmKTsNCgkJCWZvcih2YXIgaiA9IDA7IGogPCBudW1Qb2ludHM7IGorKyl7DQoJCQkJdmFyIGJ4ID0gY3YuZ2V0VWludDgob2Zmc2V0ICsgaiAqIHBvaW50QXR0cmlidXRlcy5ieXRlU2l6ZSArIDApOw0KCQkJCXZhciBieSA9IGN2LmdldFVpbnQ4KG9mZnNldCArIGogKiBwb2ludEF0dHJpYnV0ZXMuYnl0ZVNpemUgKyAxKTsNCg0KCQkJCXZhciB1ID0gKGJ4IC8gMjU1KSAqIDIgLSAxOw0KCQkJCXZhciB2ID0gKGJ5IC8gMjU1KSAqIDIgLSAxOw0KDQoJCQkJdmFyIHogPSAxIC0gTWF0aC5hYnModSkgLSBNYXRoLmFicyh2KTsNCg0KCQkJCXZhciB4ID0gMDsNCgkJCQl2YXIgeSA9IDA7DQoJCQkJaWYoeiA+PSAwKXsNCgkJCQkJeCA9IHU7DQoJCQkJCXkgPSB2Ow0KCQkJCX1lbHNlew0KCQkJCQl4ID0gLSAodi9NYXRoLnNpZ24odikgLSAxKSAvIE1hdGguc2lnbih1KTsNCgkJCQkJeSA9IC0gKHUvTWF0aC5zaWduKHUpIC0gMSkgLyBNYXRoLnNpZ24odik7DQoJCQkJfQ0KDQoJCQkJdmFyIGxlbmd0aCA9IE1hdGguc3FydCh4KnggKyB5KnkgKyB6KnopOw0KCQkJCXggPSB4IC8gbGVuZ3RoOw0KCQkJCXkgPSB5IC8gbGVuZ3RoOw0KCQkJCXogPSB6IC8gbGVuZ3RoOw0KDQoJCQkJbm9ybWFsc1szKmogKyAwXSA9IHg7DQoJCQkJbm9ybWFsc1szKmogKyAxXSA9IHk7DQoJCQkJbm9ybWFsc1szKmogKyAyXSA9IHo7DQoJCQl9DQoJCQlhdHRyaWJ1dGVCdWZmZXJzW3BvaW50QXR0cmlidXRlLm5hbWVdID0geyBidWZmZXI6IGJ1ZmYsIGF0dHJpYnV0ZTogcG9pbnRBdHRyaWJ1dGV9Ow0KCQl9ZWxzZSBpZihwb2ludEF0dHJpYnV0ZS5uYW1lID09PSBQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuTk9STUFMLm5hbWUpew0KDQoJCQl2YXIgYnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihudW1Qb2ludHMqNCozKTsNCgkJCXZhciBub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShidWZmKTsNCgkJCWZvcih2YXIgaiA9IDA7IGogPCBudW1Qb2ludHM7IGorKyl7DQoJCQkJdmFyIHggPSBjdi5nZXRGbG9hdChvZmZzZXQgKyBqICogcG9pbnRBdHRyaWJ1dGVzLmJ5dGVTaXplICsgMCk7DQoJCQkJdmFyIHkgPSBjdi5nZXRGbG9hdChvZmZzZXQgKyBqICogcG9pbnRBdHRyaWJ1dGVzLmJ5dGVTaXplICsgNCk7DQoJCQkJdmFyIHogPSBjdi5nZXRGbG9hdChvZmZzZXQgKyBqICogcG9pbnRBdHRyaWJ1dGVzLmJ5dGVTaXplICsgOCk7DQoNCgkJCQlub3JtYWxzWzMqaiArIDBdID0geDsNCgkJCQlub3JtYWxzWzMqaiArIDFdID0geTsNCgkJCQlub3JtYWxzWzMqaiArIDJdID0gejsNCgkJCX0NCgkJCWF0dHJpYnV0ZUJ1ZmZlcnNbcG9pbnRBdHRyaWJ1dGUubmFtZV0gPSB7IGJ1ZmZlcjogYnVmZiwgYXR0cmlidXRlOiBwb2ludEF0dHJpYnV0ZX07DQoJCX0NCg0KCQlvZmZzZXQgKz0gcG9pbnRBdHRyaWJ1dGUuYnl0ZVNpemU7DQoJfQ0KDQoJdmFyIGluZGljZXMgPSBuZXcgQXJyYXlCdWZmZXIobnVtUG9pbnRzKjQpOw0KCXZhciBpSW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShpbmRpY2VzKTsNCglmb3IodmFyIGkgPSAwOyBpIDwgbnVtUG9pbnRzOyBpKyspew0KCQlpSW5kaWNlc1tpXSA9IGk7DQoJfQ0KDQoJdmFyIG1lc3NhZ2UgPSB7DQoJCWF0dHJpYnV0ZUJ1ZmZlcnM6IGF0dHJpYnV0ZUJ1ZmZlcnMsDQoJCXRpZ2h0Qm91bmRpbmdCb3g6IHsgbWluOiB0aWdodEJveE1pbiwgbWF4OiB0aWdodEJveE1heCB9LA0KCQlpbmRpY2VzOiBpbmRpY2VzDQoJfTsNCg0KCXZhciB0cmFuc2ZlcmFibGVzID0gW107DQoNCglmb3IodmFyIHByb3BlcnR5IGluIG1lc3NhZ2UuYXR0cmlidXRlQnVmZmVycyl7DQoJCWlmKG1lc3NhZ2UuYXR0cmlidXRlQnVmZmVycy5oYXNPd25Qcm9wZXJ0eShwcm9wZXJ0eSkpew0KCQkJdHJhbnNmZXJhYmxlcy5wdXNoKG1lc3NhZ2UuYXR0cmlidXRlQnVmZmVyc1twcm9wZXJ0eV0uYnVmZmVyKTsNCgkJfQ0KCX0NCg0KCXRyYW5zZmVyYWJsZXMucHVzaChtZXNzYWdlLmluZGljZXMpOw0KDQoJcG9zdE1lc3NhZ2UobWVzc2FnZSwgdHJhbnNmZXJhYmxlcyk7DQoNCn07DQoNClBvdHJlZS5WZXJzaW9uID0gZnVuY3Rpb24odmVyc2lvbil7DQoJdGhpcy52ZXJzaW9uID0gdmVyc2lvbjsNCgl2YXIgdm1MZW5ndGggPSAodmVyc2lvbi5pbmRleE9mKCIuIikgPT09IC0xKSA/IHZlcnNpb24ubGVuZ3RoIDogdmVyc2lvbi5pbmRleE9mKCIuIik7DQoJdGhpcy52ZXJzaW9uTWFqb3IgPSBwYXJzZUludCh2ZXJzaW9uLnN1YnN0cigwLCB2bUxlbmd0aCkpOw0KCXRoaXMudmVyc2lvbk1pbm9yID0gcGFyc2VJbnQodmVyc2lvbi5zdWJzdHIodm1MZW5ndGggKyAxKSk7DQoJaWYodGhpcy52ZXJzaW9uTWlub3IubGVuZ3RoID09PSAwKXsNCgkJdGhpcy52ZXJzaW9uTWlub3IgPSAwOw0KCX0NCgkNCn07DQoNClBvdHJlZS5WZXJzaW9uLnByb3RvdHlwZS5uZXdlclRoYW4gPSBmdW5jdGlvbih2ZXJzaW9uKXsNCgl2YXIgdiA9IG5ldyBQb3RyZWUuVmVyc2lvbih2ZXJzaW9uKTsNCgkNCglpZiggdGhpcy52ZXJzaW9uTWFqb3IgPiB2LnZlcnNpb25NYWpvcil7DQoJCXJldHVybiB0cnVlOw0KCX1lbHNlIGlmKCB0aGlzLnZlcnNpb25NYWpvciA9PT0gdi52ZXJzaW9uTWFqb3IgJiYgdGhpcy52ZXJzaW9uTWlub3IgPiB2LnZlcnNpb25NaW5vcil7DQoJCXJldHVybiB0cnVlOw0KCX1lbHNlew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KfTsNCg0KUG90cmVlLlZlcnNpb24ucHJvdG90eXBlLmVxdWFsT3JIaWdoZXIgPSBmdW5jdGlvbih2ZXJzaW9uKXsNCgl2YXIgdiA9IG5ldyBQb3RyZWUuVmVyc2lvbih2ZXJzaW9uKTsNCgkNCglpZiggdGhpcy52ZXJzaW9uTWFqb3IgPiB2LnZlcnNpb25NYWpvcil7DQoJCXJldHVybiB0cnVlOw0KCX1lbHNlIGlmKCB0aGlzLnZlcnNpb25NYWpvciA9PT0gdi52ZXJzaW9uTWFqb3IgJiYgdGhpcy52ZXJzaW9uTWlub3IgPj0gdi52ZXJzaW9uTWlub3Ipew0KCQlyZXR1cm4gdHJ1ZTsNCgl9ZWxzZXsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCn07DQoNClBvdHJlZS5WZXJzaW9uLnByb3RvdHlwZS51cFRvID0gZnVuY3Rpb24odmVyc2lvbil7DQoJcmV0dXJuICF0aGlzLm5ld2VyVGhhbih2ZXJzaW9uKTsNCn07DQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcyA9IHt9Ow0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5QT1NJVElPTl9DQVJURVNJQU4gCT0gMDsJLy8gZmxvYXQgeCwgeSwgejsNClBvdHJlZS5Qb2ludEF0dHJpYnV0ZU5hbWVzLkNPTE9SX1BBQ0tFRAkJPSAxOwkvLyBieXRlIHIsIGcsIGIsIGE7IAlJID0gWzAsMV0NClBvdHJlZS5Qb2ludEF0dHJpYnV0ZU5hbWVzLkNPTE9SX0ZMT0FUU18xCQk9IDI7CS8vIGZsb2F0IHIsIGcsIGI7IAkJSSA9IFswLDFdDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5DT0xPUl9GTE9BVFNfMjU1CT0gMzsJLy8gZmxvYXQgciwgZywgYjsgCQlJID0gWzAsMjU1XQ0KUG90cmVlLlBvaW50QXR0cmlidXRlTmFtZXMuTk9STUFMX0ZMT0FUUwkJPSA0OyAgCS8vIGZsb2F0IHgsIHksIHo7DQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5GSUxMRVIJCQkJPSA1Ow0KUG90cmVlLlBvaW50QXR0cmlidXRlTmFtZXMuSU5URU5TSVRZCQkJPSA2Ow0KUG90cmVlLlBvaW50QXR0cmlidXRlTmFtZXMuQ0xBU1NJRklDQVRJT04JCT0gNzsNClBvdHJlZS5Qb2ludEF0dHJpYnV0ZU5hbWVzLk5PUk1BTF9TUEhFUkVNQVBQRUQJPSA4Ow0KUG90cmVlLlBvaW50QXR0cmlidXRlTmFtZXMuTk9STUFMX09DVDE2CQk9IDk7DQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5OT1JNQUwJCQkJPSAxMDsNCg0KLyoqDQogKiBTb21lIHR5cGVzIG9mIHBvc3NpYmxlIHBvaW50IGF0dHJpYnV0ZSBkYXRhIGZvcm1hdHMNCiAqDQogKiBAY2xhc3MNCiAqLw0KUG90cmVlLlBvaW50QXR0cmlidXRlVHlwZXMgPSB7DQoJREFUQV9UWVBFX0RPVUJMRQk6IHtvcmRpbmFsIDogMCwgc2l6ZTogOH0sDQoJREFUQV9UWVBFX0ZMT0FUCQk6IHtvcmRpbmFsIDogMSwgc2l6ZTogNH0sDQoJREFUQV9UWVBFX0lOVDgJCToge29yZGluYWwgOiAyLCBzaXplOiAxfSwNCglEQVRBX1RZUEVfVUlOVDgJCToge29yZGluYWwgOiAzLCBzaXplOiAxfSwNCglEQVRBX1RZUEVfSU5UMTYJCToge29yZGluYWwgOiA0LCBzaXplOiAyfSwNCglEQVRBX1RZUEVfVUlOVDE2CToge29yZGluYWwgOiA1LCBzaXplOiAyfSwNCglEQVRBX1RZUEVfSU5UMzIJCToge29yZGluYWwgOiA2LCBzaXplOiA0fSwNCglEQVRBX1RZUEVfVUlOVDMyCToge29yZGluYWwgOiA3LCBzaXplOiA0fSwNCglEQVRBX1RZUEVfSU5UNjQJCToge29yZGluYWwgOiA4LCBzaXplOiA4fSwNCglEQVRBX1RZUEVfVUlOVDY0CToge29yZGluYWwgOiA5LCBzaXplOiA4fQ0KfTsNCg0KdmFyIGkgPSAwOw0KZm9yKHZhciBvYmogaW4gUG90cmVlLlBvaW50QXR0cmlidXRlVHlwZXMpew0KCVBvdHJlZS5Qb2ludEF0dHJpYnV0ZVR5cGVzW2ldID0gUG90cmVlLlBvaW50QXR0cmlidXRlVHlwZXNbb2JqXTsNCglpKys7DQp9DQoNCi8qKg0KICogQSBzaW5nbGUgcG9pbnQgYXR0cmlidXRlIHN1Y2ggYXMgY29sb3Ivbm9ybWFsLy4uIGFuZCBpdHMgZGF0YSBmb3JtYXQvbnVtYmVyIG9mIGVsZW1lbnRzLy4uLg0KICoNCiAqIEBjbGFzcw0KICogQHBhcmFtIG5hbWUNCiAqIEBwYXJhbSB0eXBlDQogKiBAcGFyYW0gc2l6ZQ0KICogQHJldHVybnMNCiAqLw0KUG90cmVlLlBvaW50QXR0cmlidXRlID0gZnVuY3Rpb24obmFtZSwgdHlwZSwgbnVtRWxlbWVudHMpew0KCXRoaXMubmFtZSA9IG5hbWU7DQoJdGhpcy50eXBlID0gdHlwZTsNCgl0aGlzLm51bUVsZW1lbnRzID0gbnVtRWxlbWVudHM7DQoJdGhpcy5ieXRlU2l6ZSA9IHRoaXMubnVtRWxlbWVudHMgKiB0aGlzLnR5cGUuc2l6ZTsNCn07DQoNClBvdHJlZS5Qb2ludEF0dHJpYnV0ZS5QT1NJVElPTl9DQVJURVNJQU4gPSBuZXcgUG90cmVlLlBvaW50QXR0cmlidXRlKA0KCQlQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5QT1NJVElPTl9DQVJURVNJQU4sDQoJCVBvdHJlZS5Qb2ludEF0dHJpYnV0ZVR5cGVzLkRBVEFfVFlQRV9GTE9BVCwgMyk7DQoNClBvdHJlZS5Qb2ludEF0dHJpYnV0ZS5SR0JBX1BBQ0tFRCA9IG5ldyBQb3RyZWUuUG9pbnRBdHRyaWJ1dGUoDQoJCVBvdHJlZS5Qb2ludEF0dHJpYnV0ZU5hbWVzLkNPTE9SX1BBQ0tFRCwNCgkJUG90cmVlLlBvaW50QXR0cmlidXRlVHlwZXMuREFUQV9UWVBFX0lOVDgsIDQpOw0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuQ09MT1JfUEFDS0VEID0gUG90cmVlLlBvaW50QXR0cmlidXRlLlJHQkFfUEFDS0VEOw0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuUkdCX1BBQ0tFRCA9IG5ldyBQb3RyZWUuUG9pbnRBdHRyaWJ1dGUoDQoJCVBvdHJlZS5Qb2ludEF0dHJpYnV0ZU5hbWVzLkNPTE9SX1BBQ0tFRCwNCgkJUG90cmVlLlBvaW50QXR0cmlidXRlVHlwZXMuREFUQV9UWVBFX0lOVDgsIDMpOw0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuTk9STUFMX0ZMT0FUUyA9IG5ldyBQb3RyZWUuUG9pbnRBdHRyaWJ1dGUoDQoJCVBvdHJlZS5Qb2ludEF0dHJpYnV0ZU5hbWVzLk5PUk1BTF9GTE9BVFMsDQoJCVBvdHJlZS5Qb2ludEF0dHJpYnV0ZVR5cGVzLkRBVEFfVFlQRV9GTE9BVCwgMyk7DQoNClBvdHJlZS5Qb2ludEF0dHJpYnV0ZS5GSUxMRVJfMUIgPSBuZXcgUG90cmVlLlBvaW50QXR0cmlidXRlKA0KCQlQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5GSUxMRVIsDQoJCVBvdHJlZS5Qb2ludEF0dHJpYnV0ZVR5cGVzLkRBVEFfVFlQRV9VSU5UOCwgMSk7DQoNClBvdHJlZS5Qb2ludEF0dHJpYnV0ZS5JTlRFTlNJVFkgPSBuZXcgUG90cmVlLlBvaW50QXR0cmlidXRlKA0KCQlQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5JTlRFTlNJVFksDQoJCVBvdHJlZS5Qb2ludEF0dHJpYnV0ZVR5cGVzLkRBVEFfVFlQRV9VSU5UMTYsIDEpOw0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuQ0xBU1NJRklDQVRJT04gPSBuZXcgUG90cmVlLlBvaW50QXR0cmlidXRlKA0KCQlQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5DTEFTU0lGSUNBVElPTiwNCgkJUG90cmVlLlBvaW50QXR0cmlidXRlVHlwZXMuREFUQV9UWVBFX1VJTlQ4LCAxKTsNCg0KUG90cmVlLlBvaW50QXR0cmlidXRlLk5PUk1BTF9TUEhFUkVNQVBQRUQgPSBuZXcgUG90cmVlLlBvaW50QXR0cmlidXRlKA0KCQlQb3RyZWUuUG9pbnRBdHRyaWJ1dGVOYW1lcy5OT1JNQUxfU1BIRVJFTUFQUEVELA0KCQlQb3RyZWUuUG9pbnRBdHRyaWJ1dGVUeXBlcy5EQVRBX1RZUEVfVUlOVDgsIDIpOw0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuTk9STUFMX09DVDE2ID0gbmV3IFBvdHJlZS5Qb2ludEF0dHJpYnV0ZSgNCgkJUG90cmVlLlBvaW50QXR0cmlidXRlTmFtZXMuTk9STUFMX09DVDE2LA0KCQlQb3RyZWUuUG9pbnRBdHRyaWJ1dGVUeXBlcy5EQVRBX1RZUEVfVUlOVDgsIDIpOw0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuTk9STUFMID0gbmV3IFBvdHJlZS5Qb2ludEF0dHJpYnV0ZSgNCgkJUG90cmVlLlBvaW50QXR0cmlidXRlTmFtZXMuTk9STUFMLA0KCQlQb3RyZWUuUG9pbnRBdHRyaWJ1dGVUeXBlcy5EQVRBX1RZUEVfRkxPQVQsIDMpOw0KDQovKioNCiAqIE9yZGVyZWQgbGlzdCBvZiBQb2ludEF0dHJpYnV0ZXMgdXNlZCB0byBpZGVudGlmeSBob3cgcG9pbnRzIGFyZSBhbGlnbmVkIGluIGEgYnVmZmVyLg0KICoNCiAqIEBjbGFzcw0KICoNCiAqLw0KUG90cmVlLlBvaW50QXR0cmlidXRlcyA9IGZ1bmN0aW9uKHBvaW50QXR0cmlidXRlcyl7DQoJdGhpcy5hdHRyaWJ1dGVzID0gW107DQoJdGhpcy5ieXRlU2l6ZSA9IDA7DQoJdGhpcy5zaXplID0gMDsNCg0KCWlmKHBvaW50QXR0cmlidXRlcyAhPSBudWxsKXsNCgkJZm9yKHZhciBpID0gMDsgaSA8IHBvaW50QXR0cmlidXRlcy5sZW5ndGg7IGkrKyl7DQoJCQl2YXIgcG9pbnRBdHRyaWJ1dGVOYW1lID0gcG9pbnRBdHRyaWJ1dGVzW2ldOw0KCQkJdmFyIHBvaW50QXR0cmlidXRlID0gUG90cmVlLlBvaW50QXR0cmlidXRlW3BvaW50QXR0cmlidXRlTmFtZV07DQoJCQl0aGlzLmF0dHJpYnV0ZXMucHVzaChwb2ludEF0dHJpYnV0ZSk7DQoJCQl0aGlzLmJ5dGVTaXplICs9IHBvaW50QXR0cmlidXRlLmJ5dGVTaXplOw0KCQkJdGhpcy5zaXplKys7DQoJCX0NCgl9DQp9Ow0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGVzLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihwb2ludEF0dHJpYnV0ZSl7DQoJdGhpcy5hdHRyaWJ1dGVzLnB1c2gocG9pbnRBdHRyaWJ1dGUpOw0KCXRoaXMuYnl0ZVNpemUgKz0gcG9pbnRBdHRyaWJ1dGUuYnl0ZVNpemU7DQoJdGhpcy5zaXplKys7DQp9Ow0KDQpQb3RyZWUuUG9pbnRBdHRyaWJ1dGVzLnByb3RvdHlwZS5oYXNDb2xvcnMgPSBmdW5jdGlvbigpew0KCWZvcih2YXIgbmFtZSBpbiB0aGlzLmF0dHJpYnV0ZXMpew0KCQl2YXIgcG9pbnRBdHRyaWJ1dGUgPSB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07DQoJCWlmKHBvaW50QXR0cmlidXRlLm5hbWUgPT09IFBvdHJlZS5Qb2ludEF0dHJpYnV0ZU5hbWVzLkNPTE9SX1BBQ0tFRCl7DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCX0NCg0KCXJldHVybiBmYWxzZTsNCn07DQoNClBvdHJlZS5Qb2ludEF0dHJpYnV0ZXMucHJvdG90eXBlLmhhc05vcm1hbHMgPSBmdW5jdGlvbigpew0KCWZvcih2YXIgbmFtZSBpbiB0aGlzLmF0dHJpYnV0ZXMpew0KCQl2YXIgcG9pbnRBdHRyaWJ1dGUgPSB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07DQoJCWlmKA0KCQkJcG9pbnRBdHRyaWJ1dGUgPT09IFBvdHJlZS5Qb2ludEF0dHJpYnV0ZS5OT1JNQUxfU1BIRVJFTUFQUEVEIHx8DQoJCQlwb2ludEF0dHJpYnV0ZSA9PT0gUG90cmVlLlBvaW50QXR0cmlidXRlLk5PUk1BTF9GTE9BVFMgfHwNCgkJCXBvaW50QXR0cmlidXRlID09PSBQb3RyZWUuUG9pbnRBdHRyaWJ1dGUuTk9STUFMIHx8DQoJCQlwb2ludEF0dHJpYnV0ZSA9PT0gUG90cmVlLlBvaW50QXR0cmlidXRlLk5PUk1BTF9PQ1QxNil7DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfQ0KCX0NCg0KCXJldHVybiBmYWxzZTsNCn07DQo="));